{
	"root": {
		"templates": {
			"html": "<html>\n<body>\n{{range $c := elementChildren .}}\n\t{{dynamicTemplate $c.Element $c}}\n{{end}}\n</body>\n</html>\n\n{{define \"HTMLAttributes\"}}{{with .Data}}{{with .Attributes}} {{attributesToHTML .}}{{end}}{{end}}{{end}}\n{{define \"children\"}}\n\t{{- range $c := elementChildren . -}}\n\t\t{{- dynamicTemplate $c.Element $c -}}\n\t{{- end -}}\n{{end}}\n"
		}	
	},
	"elements": {
		"Title": {
			"type": "hanging",
			"delimiter": "=",
			"templates": {
				"html": "<h1 {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</h1>\n"
			}
		},
		"Subtitle": {
			"type": "walled",
			"delimiter": "_",
			"templates": {
				"html": "{{template \"children\" .}}"
			}
		},
		"Heading": {
			"type": "rankedHanging",
			"delimiter": "=",
			"templates": {
				"html": "{{$_ := setData . \"Attributes\" (setDefault .Data.Attributes \"id\" .TextContent)}}\n<h{{.Data.rank}} {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</h{{.Data.rank}}>\n"
			}
		},
		"NumberedHeading": {
			"type": "rankedHanging",
			"delimiter": "#",
			"templates": {
				"html": "{{$_ := setData . \"Attributes\" (setDefault .Data.Attributes \"id\" .TextContent)}}\n<h{{.Data.rank}} {{- template \"HTMLAttributes\" .}}>\n\t<span style=\"float:left\">{{.Data.sequentialNumber}}&nbsp;</span>\n\t{{template \"children\" .}}\n</h{{.Data.rank}}>\n"
			}
		},
		"Blockquote": {
			"type": "walled",
			"delimiter": ">",
			"templates": {
				"html": "<blockquote {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</blockquote>\n"
			}
		},
		"ListItem": {
			"type": "hanging",
			"delimiter": "-",
			"templates": {
				"html": "<li>{{template \"children\" .}}</li>"
			}
		},
		"NumberedListItem": {
			"type": "hanging",
			"delimiter": "1.",
			"templates": {
				"html": "{{template \"ListItem\" .}}"
			}
		},
		"PreformattedBlock": {
			"type": "fenced",
			"delimiter": "'",
			"templates": {
				"html": "<pre {{- template \"HTMLAttributes\" .}}>\n\t{{- template \"children\" . -}}\n</pre>\n"
			}
		},
		"CodeBlock": {
			"type": "fenced",
			"delimiter": "`",
			"templates": {
				"html": "<pre {{- template \"HTMLAttributes\" .}}><code {{- with .Data.openingText}} lang=\"{{.}}\"{{end}}>\n\t{{- template \"children\" . -}}\n</code></pre>\n"
			}
		},
		"Image": {
			"type": "verbatimLine",
			"delimiter": ".image",
			"templates": {
				"html": "<img src=\"{{trimSpacing .TextContent}}\" {{- template \"HTMLAttributes\" .}}/>\n"
			}
		},
		"Note": {
			"type": "walled",
			"delimiter": "*",
			"templates": {
				"html": "<div style=\"margin-left: 1em;padding-left:1em;border-left:2px solid blue;\" {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</div>"
			}
		},
		"Term": {
			"type": "hanging",
			"delimiter": "?",
			"templates": {
				"html": "{{template \"children\" .}}"
			}
		},
		"Description": {
			"type": "hanging",
			"delimiter": ":",
			"templates": {
				"html": "{{template \"children\" .}}"
			}
		},
		"Caption": {
			"type": "walled",
			"delimiter": "+",
			"templates": {
				"html": "{{template \"children\" .}}"
			}
		},
		"TableOfContents": {
			"type": "hanging",
			"delimiter": ".toc",
			"doNotRemove": true,
			"templates": {
				"html": "<div {{- template \"HTMLAttributes\" .}}>\n\t<p>{{template \"children\" .}}</p>\n\t{{template \"grouper\" global.aggregates.sequentialNumbers.numberedHeadings.Group}}\n</div>\n\n{{define \"grouper\"}}\n\t<ul>\n\t\t{{range .}}\n\t\t\t{{if eq (printf \"%T\" .) \"sequentialnumber.group\"}}\n\t\t\t\t{{template \"grouper\" .}}\n\t\t\t{{else}}\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#{{.ID}}\">{{.SequentialNumber}} {{.Text}}</a>\n\t\t\t\t</li>\n\t\t\t{{end}}\n\t\t{{end}}\n\t</ul>\n{{end}}\n"
			}
		},
		"BlockComment": {
			"type": "verbatimWalled",
			"delimiter": "/",
			"templates": {
				"html": ""
			}
		},
		"Attributes": {
			"type": "verbatimWalled",
			"delimiter": "!",
			"templates": {
				"html": ""
			}
		},
		"TextBlock": {
			"type": "leaf",
			"templates": {
				"html": "<span {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</span>\n"
			}
		},

		"Emphasis": {
			"type": "uniform",
			"delimiter": "_",
			"templates": {
				"html": "<em>{{template \"children\" .}}</em>"
			}
		},
		"Strong": {
			"type": "uniform",
			"delimiter": "*",
			"templates": {
				"html": "<strong>{{template \"children\" .}}</strong>"
			}
		},
		"Code": {
			"type": "escaped",
			"delimiter": "`",
			"templates": {
				"html": "<code>{{.TextContent}}</code>"
			}
		},
		"Link": {
			"type": "escaped",
			"delimiter": "[",
			"templates": {
				"html": "<a href=\"{{.TextContent}}\">{{.TextContent}}</a>"
			}
		},
		"HTTP": {
			"type": "prefixed",
			"delimiter": "http://",
			"matcher": "url",
			"templates": {
				"html": "<a href=\"http://{{.TextContent}}\">http://{{.TextContent}}</a>"
			}
		},
		"HTTPS": {
			"type": "prefixed",
			"delimiter": "https://",
			"matcher": "url",
			"templates": {
				"html": "<a href=\"https://{{.TextContent}}\">https://{{.TextContent}}</a>"
			}
		},
		"WWW": {
			"type": "prefixed",
			"delimiter": "www.",
			"matcher": "url",
			"templates": {
				"html": "<a href=\"http://www.{{.TextContent}}\">www.{{.TextContent}}</a>"
			}
		},
		"LineBreak": {
			"type": "prefixed",
			"delimiter": "\\",
			"doNotRemove": true,
			"templates": {
				"html": "<br>"
			}
		},
		"Comment": {
			"type": "escaped",
			"delimiter": "/",
			"templates": {
				"html": ""
			}
		},
		"Group": {
			"type": "uniform",
			"delimiter": "(",
			"templates": {
				"html": "{{template \"children\" .}}"
			}
		},
		"Text": {
			"type": "text",
			"templates": {
				"html": "{{.Value}}"
			}
		}
	},
	"groups": {
		"Paragraph": {
			"type": "paragraph",
			"option": "leaf",
			"templates": {
				"html": "<p {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</p>\n"
			}
		},
		"List": {
			"type": "list",
			"element": "ListItem",
			"templates": {
				"html": "<ul {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</ul>\n"
			}
		},
		"NumberedList": {
			"type": "list",
			"element": "NumberedListItem",
			"templates": {
				"html": "<ol {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</ol>\n"
			}
		},
		"TermList": {
			"type": "list",
			"element": "Term",
			"templates": {
				"html": "<div {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</div>\n"
			}
		},
		"DescriptionList": {
			"type": "list",
			"element": "Description",
			"templates": {
				"html": "<div {{- template \"HTMLAttributes\" .}}>\n\t{{template \"children\" .}}\n</div>\n"
			}
		},
		"StickySubtitle": {
			"type": "sticky",
			"element": "Subtitle",
			"option": "after",
			"templates": {
				"html": "{{$subtitle := .LastChild}}\n{{$target   := .FirstChild}}\n<header {{- template \"HTMLAttributes\" .}}>\n\t{{dynamicTemplate $target.Element $target}}\n\t<p>{{dynamicTemplate $subtitle.Element $subtitle}}</p>\n</header>\n"
			}
		},
		"StickyDescription": {
			"type": "sticky",
			"element": "DescriptionList",
			"option": "after",
			"templates": {
				"html": "{{$list   := .LastChild}}\n{{$target := .FirstChild}}\n<dl {{- template \"HTMLAttributes\" .}}>\n\t{{range $c := elementChildren $target}}\n\t\t<dt>{{dynamicTemplate $target.Element $c}}</dt>\n\t{{end}}\n\t{{range $c := elementChildren $list}}\n\t\t<dd>{{dynamicTemplate $list.Element $c}}</dd>\n\t{{end}}\n</dl>\n"
			}
		},
		"StickyCaption": {
			"type": "sticky",
			"element": "Caption",
			"option": "after",
			"templates": {
				"html": "{{$caption := .LastChild}}\n{{$target  := .FirstChild}}\n<figure {{- template \"HTMLAttributes\" .}}>\n\t{{dynamicTemplate $target.Element $target}}\n\t<figcaption>\n\t\t{{dynamicTemplate $caption.Element $caption}}\n\t</figcaption>\n</figure>\n"
			}
		},
		"StickyAttributes": {
			"type": "sticky",
			"element": "Attributes",
			"templates": {
				"html": "{{$attrs  := .FirstChild}}\n{{$target := .LastChild}}\n\n{{$attrsMap := parseAttributes $attrs.TextContent}}\n{{$_        := setData $target \"Attributes\" $attrsMap}}\n\n{{dynamicTemplate $target.Element $target}}\n"
			}
		},

		"NamedLink": {
			"type": "sticky",
			"element": "Group",
			"target": "Link",
			"templates": {
				"html": "{{$group := .FirstChild}}\n{{$link  := .LastChild}}\n<a href=\"{{$link.TextContent}}\">\n\t{{dynamicTemplate $group.Element $group}}\n</a>\n"
			}
		}
	},
	"aggregates": {
		"sequentialNumbers": {
			"numberedHeadings": {
				"elements": ["NumberedHeading"]
			}
		}
	}
}
