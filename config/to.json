{
	"root": {
		"templates": {
			"html": "<html>\n<body>\n{{render .}}\n</body>\n</html>"
		}	
	},
	"Text": {
		"templates": {
			"html": "{{.Content}}"
		}
	},
	"Paragraph": {
		"templates": {
			"html": "<p>{{range .BlockChildren}}{{render .}}{{end}}</p>"
		}
	},
	"elements": [
		{
			"name": "TextBlock",
			"type": "leaf",
			"templates": {
				"html": "{{- range .InlineChildren}}\n\t{{- render .}}\n{{end -}}\n"
			}
		},
		{
			"name": "LineBreak",
			"type": "prefixed",
			"delimiter": "\\",
			"doNotRemove": true,
			"templates": {
				"html": "<br>"
			}
		},
		{
			"name": "HTTP",
			"type": "prefixed",
			"delimiter": "http://",
			"matcher": "url",
			"templates": {
				"html": "<a href=\"http://{{.Content}}\">http://{{.Content}}</a>"
			}
		},
		{
			"name": "HTTPS",
			"type": "prefixed",
			"delimiter": "https://",
			"matcher": "url",
			"templates": {
				"html": "<a href=\"https://{{.Content}}\">https://{{.Content}}</a>"
			}
		},
		{
			"name": "WWW",
			"type": "prefixed",
			"delimiter": "www.",
			"matcher": "url",
			"templates": {
				"html": "<a href=\"http://www.{{.Content}}\">www.{{.Content}}</a>"
			}
		},
		{
			"name": "Blockquote",
			"type": "walled",
			"delimiter": ">",
			"templates": {
				"html": "<blockquote {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{end -}}\n</blockquote>"
			}
		},
		{
			"name": "Callout",
			"type": "walled",
			"delimiter": "*",
			"templates": {
				"html": "<div\n\tstyle=\"margin-left: 1em;padding-left:1em;border-left:2px solid blue;\"\n\t{{- with .Attrs}} {{htmlAttrs .}}{{end}}\n>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{end -}}\n</div>"
			}
		},
		{
			"name": "Term",
			"type": "hanging",
			"delimiter": "^",
			"templates": {
				"html": "{{range .BlockChildren}}{{render .}}{{end}}"
			}
		},
		{
			"name": "Description",
			"type": "hanging",
			"delimiter": ":",
			"templates": {
				"html": "{{range .BlockChildren}}{{render .}}{{end}}"
			}
		},
		{
			"name": "CodeBlock",
			"type": "fenced",
			"delimiter": "`",
			"templates": {
				"html": "<pre {{- with .Attrs}} {{htmlAttrs .}}{{end}}><code {{- with head .Lines}} lang=\"{{.}}\"{{end}}>\n\t{{- body .Lines -}}\n</code></pre>"
			}
		},
		{
			"name": "PreformattedBlock",
			"type": "fenced",
			"delimiter": "'",
			"templates": {
				"html": "<pre {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- body .Lines -}}\n</pre>"
			}
		},
		{
			"name": "Title",
			"type": "hanging",
			"delimiter": "=",
			"templates": {
				"html": "<h1 {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{end -}}\n</h1>"
			}
		},
		{
			"name": "Heading",
			"type": "rankedHanging",
			"delimiter": "=",
			"templates": {
				"html": "<h{{.Rank}} {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{end -}}\n</h{{.Rank}}>"
			}
		},
		{
			"name": "NumberedHeading",
			"type": "rankedHanging",
			"delimiter": "#",
			"templates": {
				"html": "<h{{.Rank}} id=\"{{.TextContent}}\" {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t<span style=\"float:left\">{{.SequentialNumber}}&nbsp;</span>\n\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{end -}}\n</h{{.Rank}}>"
			}
		},
		{
			"name": "Image",
			"type": "verbatimLine",
			"delimiter": ".image",
			"templates": {
				"html": "<img src=\"{{trimSpacing .Content}}\" {{- with .Attrs}} {{htmlAttrs .}}{{end}} />\n"
			}
		},
		{
			"name": "NumberedListItemDot",
			"type": "hanging",
			"delimiter": "1.",
			"templates": {
				"html": "<li>{{range .BlockChildren}}{{render .}}{{end}}</li>"
			}
		},
		{
			"name": "NumberedListItemParen",
			"type": "hanging",
			"delimiter": "1)",
			"templates": {
				"html": "<li>{{range .BlockChildren}}{{render .}}{{end}}</li>"
			}
		},
		{
			"name": "ListItemDot",
			"type": "hanging",
			"delimiter": "-",
			"templates": {
				"html": "<li>{{range .BlockChildren}}{{render .}}{{end}}</li>"
			}
		},
		{
			"name": "TableOfContents",
			"type": "hanging",
			"delimiter": ".toc",
			"doNotRemove": true,
			"templates": {
				"html": "<div {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t<p>{{range .BlockChildren}}{{render .}}{{end}}</p>\n\n\t{{block \"grouper\" groupBySequentialNumber .aggregates.sequentialNumbers.numberedHeadings}}\n\t\t<ul>\n\t\t\t{{range .}}\n\t\t\t\t{{if isSequentialNumberGroup .}}\n\t\t\t\t\t{{template \"grouper\" .}}\n\t\t\t\t{{else}}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"#{{.ID}}\">{{.SequentialNumber}} {{.Text}}</a>\n\t\t\t\t\t</li>\n\t\t\t\t{{end}}\n\t\t\t{{end}}\n\t\t</ul>\n\t{{end}}\n</div>"
			}
		},

		{
			"name": "Group",
			"type": "uniform",
			"delimiter": "(",
			"templates": {
				"html": "{{range .InlineChildren}}{{render .}}{{end}}"
			}
		},
		{
			"name": "Emphasis",
			"type": "uniform",
			"delimiter": "_",
			"templates": {
				"html": "<em>{{range .InlineChildren}}{{render .}}{{end}}</em>"
			}
		},
		{
			"name": "Strong",
			"type": "uniform",
			"delimiter": "*",
			"templates": {
				"html": "<strong>{{range .InlineChildren}}{{render .}}{{end}}</strong>"
			}
		},
		{
			"name": "Comment",
			"type": "escaped",
			"delimiter": "/",
			"templates": {
				"html": ""
			}
		},
		{
			"name": "Link",
			"type": "escaped",
			"delimiter": "[",
			"templates": {
				"html": "<a href=\"{{.Content}}\">{{.Content}}</a>"
			}
		},
		{
			"name": "Code",
			"type": "escaped",
			"delimiter": "`",
			"templates": {
				"html": "<code>{{.Content}}</code>"
			}
		},
		{
			"name": "Attributes",
			"type": "verbatimWalled",
			"delimiter": "!",
			"templates": {
				"html": ""
			}
		},
		{
			"name": "Caption",
			"type": "walled",
			"delimiter": "+",
			"templates": {
				"html": "{{- range .BlockChildren}}\n\t{{- render .}}\n{{end -}}\n"
			}
		},
		{
			"name": "Subtitle",
			"type": "walled",
			"delimiter": "_",
			"templates": {
				"html": "{{- range .BlockChildren}}\n\t{{- render .}}\n{{end -}}\n"
			}
		}
	],
	"composites": [
		{
			"name": "NamedLink",
			"primaryElement": "Group",
			"secondaryElement": "Link",
			"templates": {
				"html": "<a href=\"{{.SecondaryElement.Content}}\">{{range .PrimaryElement.InlineChildren}}{{render .}}{{end}}</a>"
			}
		}
	],
	"stickies": [
		{
			"name": "StickyAttributes",
			"element": "Attributes",
			"templates": {
				"html": "{{ $attrs := parseAttrs .StickyElement.Lines }}\n{{renderWithData .TargetElement.Self (mapAny \"Attrs\" $attrs)}}\n"
			}
		},
		{
			"name": "StickyCaption",
			"element": "Caption",
			"after": true,
			"templates": {
				"html": "<figure>\n\t{{render .TargetElement.Self}}\n\t<figcaption>\n\t\t{{- range .StickyElement.BlockChildren}}\n\t\t\t{{render .}}\n\t\t{{end -}}\n\t</figcaption>\n</figure>\n"
			}
		},
		{
			"name": "StickySubtitle",
			"element": "Subtitle",
			"after": true,
			"templates": {
				"html": "<header>\n\t{{render .TargetElement.Self}}\n\t<p>\n\t\t{{- range .StickyElement.BlockChildren}}\n\t\t\t{{render .}}\n\t\t{{end -}}\n\t</p>\n</header>\n"
			}
		},
		{
			"name": "StickyDescription",
			"element": "DescriptionList",
			"after": true,
			"templates": {
				"html": "{{if eq .TargetElement.Self.Node \"StickyAttributes\"}}\n\t{{- /* has sticky attributes nested so parse attributes from it */ -}}\n\n\t{{ $attrs := parseAttrs .TargetElement.StickyElement.Lines }}\n\t<dl {{- with $attrs}} {{htmlAttrs .}}{{end}}>\n\t\t{{- range .TargetElement.TargetElement.BlockChildren}}\n\t\t\t<dt>{{render .}}</dt>\n\t\t{{end -}}\n\t\t{{- range .StickyElement.BlockChildren}}\n\t\t\t<dd>{{render .}}</dd>\n\t\t{{end -}}\n\t</dl>\n{{else}}\n\t<dl>\n\t\t{{- range .TargetElement.BlockChildren}}\n\t\t\t<dt>{{render .}}</dt>\n\t\t{{end -}}\n\t\t{{- range .StickyElement.BlockChildren}}\n\t\t\t<dd>{{render .}}</dd>\n\t\t{{end -}}\n\t</dl>\n{{end}}\n"
			}
		}
	],
	"groups": [
		{
			"name": "NumberedListDot",
			"element": "NumberedListItemDot",
			"templates": {
				"html": "<ol class=\"dot\" {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{- end}}\n</ol>"
			}
		},
		{
			"name": "NumberedListParen",
			"element": "NumberedListItemParen",
			"templates": {
				"html": "<ol class=\"paren\" {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{- end}}\n</ol>"
			}
		},
		{
			"name": "ListDot",
			"element": "ListItemDot",
			"templates": {
				"html": "<ul {{- with .Attrs}} {{htmlAttrs .}}{{end}}>\n\t{{- range .BlockChildren}}\n\t\t{{render .}}\n\t{{- end}}\n</ul>"
			}
		},
		{
			"name": "TermList",
			"element": "Term",
			"templates": {
				"html": "{{- range .BlockChildren}}\n\t{{render .}}\n{{- end}}\n"
			}
		},
		{
			"name": "DescriptionList",
			"element": "Description",
			"templates": {
				"html": "{{- range .BlockChildren}}\n\t{{render .}}\n{{- end}}\n"
			}
		}
	],
	"aggregates": {
		"sequentialNumbers": {
			"numberedHeadings": {
				"elements": ["NumberedHeading"]
			}
		}
	}
}
